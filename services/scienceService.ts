
import { Grade, Question } from '../types';

const scienceBank: Record<Grade, Omit<Question, 'id'>[]> = {
  [Grade.PRI_3]: [
    { text: "أي الأجزاء التالية في النبات يعمل على امتصاص الماء والأملاح من التربة؟", options: ["الأوراق", "الأزهار", "الجذور", "الساق"], correctAnswer: "الجذور", category: "أجزاء النبات" },
    { text: "تحتاج النباتات لصنع غذائها إلى ضوء الشمس والماء و غاز:", options: ["الأكسجين", "النيتروجين", "ثاني أكسيد الكربون", "الهيدروجين"], correctAnswer: "ثاني أكسيد الكربون", category: "احتياجات النبات" },
    { text: "ما هي العملية التي يتحول فيها السائل إلى غاز عند تسخينه؟", options: ["الانصهار", "التبخر", "التكثف", "التجمد"], correctAnswer: "التبخر", category: "حالات المادة" },
    { text: "حيوان يغطي جسمه الشعر ويرضع صغاره الحليب، ينتمي لمجموعة:", options: ["الطيور", "الزواحف", "الثدييات", "البرمائيات"], correctAnswer: "الثدييات", category: "تصنيف الحيوانات" },
    { text: "ما الذي يسبب تعاقب الليل والنهار؟", options: ["دوران الأرض حول الشمس", "دوران القمر حول الأرض", "دوران الأرض حول محورها", "ميل محور الأرض"], correctAnswer: "دوران الأرض حول محورها", category: "الأرض والفضاء" },
    { text: "أي الحواس التالية نستخدمها للتمييز بين ملمس الخشن والناعم؟", options: ["البصر", "اللمس", "الشم", "التذوق"], correctAnswer: "اللمس", category: "الحواس" },
    { text: "تعتبر الشمس من:", options: ["الكواكب", "الأقمار", "النجوم", "المذنبات"], correctAnswer: "النجوم", category: "الفضاء" },
    { text: "القوة التي تسحب الأجسام نحو الأرض هي:", options: ["المغناطيسية", "الاحتكاك", "الجاذبية", "الدفع"], correctAnswer: "الجاذبية", category: "القوى" },
    { text: "المكان الذي يعيش فيه الكائن الحي ويجد فيه احتياجاته يسمى:", options: ["المجتمع", "الموطن", "الغابة", "الصحراء"], correctAnswer: "الموطن", category: "البيئة" },
    { text: "أي مما يلي يعتبر من موارد الطاقة المتجددة؟", options: ["النفط", "الفحم", "الرياح", "الغاز الطبيعي"], correctAnswer: "الرياح", category: "الطاقة" }
  ],
  [Grade.PRI_6]: [
    { text: "أي من التراكيب التالية توجد في الخلية النباتية ولا توجد في الخلية الحيوانية؟", options: ["الغشاء الخلوي", "النواة", "الجدار الخلوي", "السيتوبلازم"], correctAnswer: "الجدار الخلوي", category: "الخلايا" },
    { text: "ما هو الجزء المسؤول عن إنتاج الطاقة في الخلية؟", options: ["النواة", "الميتوكوندريا", "الفجوة العصارية", "جهاز جولجي"], correctAnswer: "الميتوكوندريا", category: "الخلايا" },
    { text: "الصفة التي تمنع صفة أخرى من الظهور تسمى صفة:", options: ["متنحية", "سائدة", "مكتسبة", "فطرية"], correctAnswer: "سائدة", category: "الوراثة" },
    { text: "تنتقل الحرارة في السوائل والغازات عن طريق:", options: ["التوصيل", "الإشعاع", "الحمل", "الاحتكاك"], correctAnswer: "الحمل", category: "الطاقة" },
    { text: "أي مما يلي يعتبر تغيراً كيميائياً؟", options: ["انصهار الثلج", "صدأ الحديد", "كسر الزجاج", "ذوبان السكر"], correctAnswer: "صدأ الحديد", category: "تغيرات المادة" },
    { text: "تسمى العلاقة التي يستفيد فيها كائن حي ويتضرر الآخر بـ:", options: ["تبادل المنفعة", "التعايش", "التطفل", "الافتراس"], correctAnswer: "التطفل", category: "الأنظمة البيئية" },
    { text: "أي طبقة من طبقات الأرض تكون في حالة سائلة؟", options: ["القشرة", "الستار العلوي", "اللب الخارجي", "اللب الداخلي"], correctAnswer: "اللب الخارجي", category: "بنية الأرض" },
    { text: "أي جهاز يستخدم لقياس القوة؟", options: ["الميزان ذو الكفتين", "الميزان النابضي", "المخبر المدرج", "المتر"], correctAnswer: "الميزان النابضي", category: "القوى" },
    { text: "الوحدة الأساسية لبناء الكائن الحي هي:", options: ["العضو", "النسيج", "الخلية", "الجهاز"], correctAnswer: "الخلية", category: "الخلايا" },
    { text: "ما هو الغاز الذي يشكل النسبة الأكبر في الغلاف الجوي؟", options: ["الأكسجين", "ثاني أكسيد الكربون", "النيتروجين", "الهيليوم"], correctAnswer: "النيتروجين", category: "الغلاف الجوي" }
  ],
  [Grade.INT_3]: [
    { text: "تتركز كتلة الذرة في:", options: ["الإلكترونات", "النواة", "المستويات الخارجية", "الفراغ المحيط"], correctAnswer: "النواة", category: "الذرة" },
    { text: "عناصر المجموعة الأولى في الجدول الدوري (باستثناء الهيدروجين) تسمى:", options: ["الفلزات القلوية", "الفلزات القلوية الأرضية", "الهالوجينات", "الغازات النبيلة"], correctAnswer: "الفلزات القلوية", category: "الجدول الدوري" },
    { text: "الرابطة التي تنشأ بين أيون موجب وأيون سالب تسمى رابطة:", options: ["تساهمية", "فلزية", "أيونية", "هيدروجينية"], correctAnswer: "أيونية", category: "الروابط الكيميائية" },
    { text: "ما هو المعدل الزمني لتغير السرعة المتجهة؟", options: ["السرعة اللحظية", "التسارع", "الإزاحة", "الزخم"], correctAnswer: "التسارع", category: "الحركة" },
    { text: "ينص قانون نيوتن الثالث على أن لكل فعل رد فعل مساوٍ له في المقدار و:", options: ["في نفس الاتجاه", "مضاعف له", "معاكس له في الاتجاه", "عمودي عليه"], correctAnswer: "معاكس له في الاتجاه", category: "القوى" },
    { text: "وفقاً لقانون أوم، الجهد الكهربائي يساوي:", options: ["التيار / المقاومة", "التيار × المقاومة", "المقاومة / التيار", "التيار + المقاومة"], correctAnswer: "التيار × المقاومة", category: "الكهرباء" },
    { text: "ما اسم الانقسام الذي ينتج عنه خلايا جنسية (جاميتات)؟", options: ["الانقسام المتساوي", "الانقسام المنصف (الميوزي)", "الانشطار الثنائي", "التبرعم"], correctAnswer: "الانقسام المنصف (الميوزي)", category: "الأحياء" },
    { text: "الجزيء الذي يحمل الشفرة الوراثية في الخلية هو:", options: ["ATP", "RNA", "DNA", "الأنسولين"], correctAnswer: "DNA", category: "الوراثة" },
    { text: "تحدث عملية الاندماج النووي التي تنتج طاقة النجوم في:", options: ["الستار", "النواة (اللب)", "القشرة", "الغلاف الجوي"], correctAnswer: "النواة (اللب)", category: "الفضاء" },
    { text: "ما هو العضو المسؤول عن تصفية الدم من الفضلات في جسم الإنسان؟", options: ["القلب", "الكبد", "الكلية", "الرئة"], correctAnswer: "الكلية", category: "أجهزة الجسم" }
  ]
};

export interface ScienceFact {
  title: string;
  description: string;
  category: 'biology' | 'physics' | 'chemistry' | 'earth' | 'space';
}

const factsBank: Record<Grade, ScienceFact[]> = {
  [Grade.PRI_3]: [
    { title: "تنفس النباتات", description: "النباتات تمتلك فتحات مجهرية على أوراقها تسمى 'الثغور'، من خلالها تمتص ثاني أكسيد الكربون وتطلق الأكسجين الذي نتنفسه.", category: 'biology' },
    { title: "حرارة الشمس", description: "الشمس هي أقرب نجم للأرض، وهي كرة عملاقة من الغازات الملتهبة تمدنا بالضوء والحرارة اللازمين للحياة.", category: 'space' },
    { title: "الجاذبية الأرضية", description: "الجاذبية هي القوة الخفية التي تجعل الأشياء تسقط نحو الأسفل بدلاً من الطيران في الهواء.", category: 'physics' }
  ],
  [Grade.PRI_6]: [
    { title: "بنية الخلية", description: "تحتوي الخلية النباتية على 'بلاستيدات خضراء' تقوم بعملية البناء الضوئي، و'جدار خلوي' صلب يعطيها شكلاً محدداً.", category: 'biology' },
    { title: "باطن الأرض", description: "تتكون الأرض من 4 طبقات رئيسية: القشرة، الستار، اللب الخارجي (سائل)، واللب الداخلي (صلب).", category: 'earth' }
  ],
  [Grade.INT_3]: [
    { title: "الجدول الدوري", description: "العناصر المرتبة في المجموعة 18 تسمى 'الغازات النبيلة'؛ وهي خاملة كيميائياً لأن مستويات طاقتها مكتملة.", category: 'chemistry' },
    { title: "الحمض النووي DNA", description: "الـ DNA هو المخطط الرئيسي للحياة، ويحتوي على المعلومات الوراثية التي تحدد كل شيء في الكائن الحي.", category: 'biology' }
  ]
};

export const generateScienceQuestions = (grade: Grade, count: number = 10): Question[] => {
  const bank = scienceBank[grade] || scienceBank[Grade.PRI_3];
  const shuffled = [...bank].sort(() => 0.5 - Math.random());
  return shuffled.slice(0, Math.min(count, bank.length)).map((q, index) => ({
    ...q,
    id: index + 1
  }));
};

export const getEnrichingFacts = (grade: Grade, count: number = 5): ScienceFact[] => {
  const bank = factsBank[grade] || factsBank[Grade.PRI_3];
  const shuffled = [...bank].sort(() => 0.5 - Math.random());
  return shuffled.slice(0, count);
};
